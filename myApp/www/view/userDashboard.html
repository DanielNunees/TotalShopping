<ion-view view-title="Dashboard" >
  <ion-content class='has-footer' >
    <div ng-if="isAuthenticated()"> <!-- If user not logged -->

      <header class="image-background-profile">
        <!--img ng-src="img/profile.jpg" class="img-circle user-image"-->
      </header>

      <div class="button-bar no-padding">
        <a class="button button-block button-positive button-outline" ng-click="slideChanged(0)" ng-class="{'active' : slide==0}">Perfil</a>
        <a class="button button-block button-positive button-outline" ng-click="slideChanged(1)" ng-class="{'active' : slide==1}">Histórico</a>
        <a class="button button-block button-positive button-outline" ng-click="slideChanged(2)" ng-class="{'active' : slide==2}">Dados</a>
      </div>

      <ion-slide-box show-pager='false' on-slide-changed="slideHasChanged($index)">
        <ion-slide>
          <div>
            <h4>Primeira Aba</h4>
            <button class="button button-positive" ng-click='loadData()'>Reload</button>
          </div>
        </ion-slide>
        <ion-slide>
          <div> 
            <h3>Segunda aba</h3>
            <p>Coisas...</p>
          </div>
        </ion-slide>
        <ion-slide>
          <div ng-if="isEmpty">
            <h3>Nenhum endereço cadastrado ainda</h3>
          </div>

          <div ng-if="!isEmpty" class="list">
            <div class="item item-divider text-center">
              Dados Pessoais
            </div>
            <span class="item item-icon-left">
              <i class="icon ion-person"></i>
              {{userData.firstname}} {{userData.lastname}}
            </span>

            <span class="item item-icon-left ">
              <i class="icon ion-calendar"></i>
              Data de nascimento
            </span>
            <div class="item item-divider text-center">
              Endereço de Entrega
            </div>
            <span class="item item-icon-left">
              <i class="icon ion-location"></i>
              <p>{{userData.city}}, {{userData.state}}</p>
            </span>

            <span class="item item-icon-left">
              <i class="icon ion-map"></i>
              <p>{{userData.address1}}, {{userData.address2}}</p>
            </span>

            <span class="item item-icon-left">
              <i class="icon ion-pound"></i>
              {{userData.postcode}}
            </span>

            <span class="item item-icon-left">
              <i class="icon ion-ios-telephone"></i>
              {{userData.phone_mobile}}
            </span>
          </div> <!-- List -->
          <button ng-if="!isEmpty" class="button button-block button-positive button-outline" ng-click="openModal()">Editar</button>
          <button ng-if="isEmpty" class="button button-block button-positive button-outline" ng-click="openModal()">Cadastrar Novo Endereço</button>
        </ion-slide>
      </ion-slide-box>
      <button class="button button-block button-assertive button-outline" ng-click="logout()"> Logout</button>
    </div> <!--ng-if='isAuthenticated'--><!-- If user not logged -->
  </ion-content>

  <script id="my-modal.html" type="text/ng-template">
    <ion-modal-view>
      <ion-header-bar class="bar bar-header bar-positive">
        <h1 class="title">Novo Endereço</h1>
        <button class="button button-clear button-primary" ng-click="modal.hide()">Cancel</button>
      </ion-header-bar>
      <ion-content>
        <form ng-if='isEmpty' name='addressForm' class="css-form" ng-submit="addressForm.$valid && createAddress(addressForm)" novalidate>
        coco
          <label class="item item-input item-stacked-label">
            <span class="input-label">Endereço</span>
            <input ng-model="address.address1" type="text" placeholder="Endereço" required>
          </label>

          <label class="item item-input item-stacked-label">
            <span class="input-label">Bairro</span>
            <input ng-model="address.address2" type="text" placeholder="Bairro" required="required">
          </label>

          <label class="item item-input item-stacked-label">
            <span class="input-label">CEP*</span>
            <input ng-model="address.postcode" type="text" ui-mask='99999-999' required>
          </label>

          <label class="item item-input item-select">
            <div class="input-label">Estado*</div>
            <select ng-model="address.id_state">
              <option type="text" required ng-repeat="state in states2" value="{{state.value}}">{{state.state}}</option>
            </select>
          </label>

          <label class="item item-input item-stacked-label">
            <span class="input-label">Cidade*</span>
            <input ng-model="address.city" ng-minlength="1" ng-maxlength="32" type="text" placeholder="Cidade" required>
          </label>

          <label class="item item-input item-stacked-label">
            <span class="input-label">Telefone Fixo*</span>
            <input ng-model="address.phone" type="text" ui-mask='(99)9999-9999'>
          </label>

          <label class="item item-input item-stacked-label">
            <span class="input-label">Telefone Celular*</span>
            <input ng-model="address.phone_mobile" type="text" ui-mask='(99)99999-9999' required>
          </label>

          <div> User Form is valid? {{addressForm.$valid}}</div>
          <input class="button button-block button-positive" type="submit" ng-disabled="addressForm.$invalid" value="Registrar" >
        </form>

        <form ng-if='!isEmpty' name='addressForm' class="css-form" ng-submit="addressForm.$valid && updateAddress(addressForm)" novalidate>
        bosta
          <label class="item item-input item-stacked-label">
            <span class="input-label">Endereço</span>
            <input ng-model="address.address1" type="text" placeholder="Endereço" required>
          </label>

          <label class="item item-input item-stacked-label">
            <span class="input-label">Bairro</span>
            <input ng-model="address.address2" type="text" placeholder="Bairro" required="required">
          </label>

          <label class="item item-input item-stacked-label">
            <span class="input-label">CEP*</span>
            <input ng-model="address.postcode" type="text" ui-mask='99999-999' required>
          </label>

          <label class="item item-input item-select">
            <div class="input-label">Estado*</div>
            <select ng-model="address.id_state">
              <option type="text" required ng-repeat="state in states2" value="{{state.value}}">{{state.state}}</option>
            </select>
          </label>

          <label class="item item-input item-stacked-label">
            <span class="input-label">Cidade*</span>
            <input ng-model="address.city" ng-minlength="1" ng-maxlength="32" type="text" placeholder="Cidade" required>
          </label>

          <label class="item item-input item-stacked-label">
            <span class="input-label">Telefone Fixo*</span>
            <input ng-model="address.phone" type="text" ui-mask='(99)9999-9999'>
          </label>

          <label class="item item-input item-stacked-label">
            <span class="input-label">Telefone Celular*</span>
            <input ng-model="address.phone_mobile" type="text" ui-mask='(99)99999-9999' required>
          </label>

          <div> User Form is valid? {{addressForm.$valid}}</div>
          <input class="button button-block button-positive" type="submit" ng-disabled="addressForm.$invalid" value="Registrar" >
        </form>

      </ion-content>
    </ion-modal-view>
  </script>
</ion-view>

